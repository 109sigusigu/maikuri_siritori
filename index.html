<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>マイクリ</title>
</head>
<body>
  <h1>「ま」あまあ「い」っぱい裏読みある「く」りあが難しいしりと「り」</h1>
  <p>スマホだとバグるかも。最初は好きなの選んでね。全部使えば文句なしのクリア。尻文字が「ゃ、ー」などになった場合、その一つ前の文字が先頭の文字。濁点は濁点のまま使う。</p>
  <div id="images"></div>
  <div id="result"></div>
  <script>
    // ゲームの単語リスト
    var words = {
      "明智光秀": ["images/2020.png","あけちみつひで","みつひで", "はんぎゃくしゃ","みっかてんか","てきはほんのうじにあり","ぶしょう","かくめい","せんごく"],
      "諸葛亮": ["images/5015.png","しょかつりょう", "こうめい","ふくりゅう","さんこのれい","しせるこうめいいけるちゅうたつをはしらす","せんじゅつ","せいじ","さんごくし"],
      "金太郎": ["images/2019.png", "きんたろう", "けだものあつめてすもうのけいこ", "くま" ,"ふんどし" , "あめ" ,"むかしばなし","にほんむかしばなし","さかたのきんとき","よりみつしてんのう","どうぶつ","おの"],
      "高杉晋作": ["images/2021.png","たかすぎしんさく","しんさく","おもしろきこともなきよをおもしろく", "きへいたい","そんのうじょうい","とうばく", "びわ", "せんじゅつ", "ばくまつ"],
      "アインシュタイン": ["images/5010.png", "あるべると", "のーべるぶつりがくしょう","かみはさいころをふらない","はかせ","した","べろ","りけいがくもん", "どいつ","うちゅう"],
      "ヤマトタケル": ["images/4029.png","やまとたける","さんしゅのじんぎ", "こうぞく","じんぎ","かがみ","つるぎ","まがたま","くさなぎのつるぎ","あまのむらくものつるぎ","にほんしんわ","でんしょう"],
      "レオナルド・ダ・ビンチ": ["images/5005.png", "れおなるど・だ・びんち", "だ・びんち", "もなりざ" ,"れおなるど" ,"うぃとるうぃうすてきじんたいず","ふで","ぶらし","びじゅつ","ぶんけいがくもん","りけいがくもん", "いたりあ"],
      "リチャード1世": ["images/5023.png", "りちゃーどいっせい", "きしどうのはな", "いんぐらんどおう","きんぐ", "しししんおう", "ぷらんだじねっとけ", "えくすかりばー", "いぎりす"],
      "黒髭": ["images/4036.png","くろひげ","くいーん・あんず・りべんじ", "えどわーどてぃーち","てぃーち","あんじょおうのふくしゅうごう","かいぞく","ぱいれーつ","ききいっぱつ","うみ","じゅうかき"],
      "ジャンヌ・ダルク": ["images/5007.png", "じゃんぬ・だるく", "おるれあんのおとめ", "ひゃくねんせんそう", "れっせい","はた", "じょせい" ,"ふらんす", "しんこう", "ながえぶき", "せかいさんだいじゃんぬ"],
      "石川五右衛門": ["images/3013.png", "いしかわ", "よにぬすっとのたねはつくまじ", "ぬすっと" ,"とうぞく" ,"ぎぞく","るぱんさんせい","きせる","どろぼう","かまゆで","ごえもんぶろ", "いんみつ","せんごく"],
      "クレオパトラ": ["images/5016.png", "くれおぱとら", "せんらんをよぶびぼう", "ふぃろぱとる", "ぜっせいのびじょ","かえさる", "つえ" ,"ろっど","たーとる","しどうしゃ", "じょせい", "ながえぶき", "ちちゅうかい", "せかいさんだいびじょ"],
      "織田信長": ["images/5001.png", "おだのぶなが", "のぶなが", "てんかふぶ", "うつけ", "あつもり", "ひなわじゅう" ,"ぶしょう","りみてっどれじぇんだりー","なかぬならころしてしまえほととぎす","まんと","しどうしゃ", "せんごく"],
      "ラーマ": ["images/4051.png", "らーま", "まはー・あゔぁたーら","ばららーま", "ひんどぅーきょう", "ぶらふまーすとら", "あぐねやあすとら", "こーさらこく" ,"いんどしんわ","じょじし","たび","でんしょう", "ゆみ","あじあ"],
      "前田慶次": ["images/3011.png", "まえだけいじ", "けいじ","せんごくいちのがぶきもの", "かぶきもの", "てんかごめんのかぶきもの", "はなのけいじ", "とします" ,"ぶしょう","あばれだいみょう","やり","せんごく","ながえぶき"],
      "武蔵坊弁慶": ["images/3018.png", "むさしぼうべんけい", "べんけいのたちおうじょう","ごじょうのおおはし", "たちおうじょう", "なきどころ", "そうへい", "いわとおし" ,"じゅうしゃ","ながえぶき"],
      "SUZUISHI": ["images/4060.png", "すずいし", "めいきょうしすい","おあしす", "ぶろっくちぇーん", "こらぼ", "めか","きかい","へそ","せーらーふく" ,"こじもこ","じょせい","けっとう","かくとう"],
    };


    
    // 現在の単語と、最後の文字を管理する変数を追加
var currentWord = null;
var lastChar = null;

// 単語選択用画像を作成する
var imagesDiv = document.getElementById("images");
for (var word in words) {
  var image = document.createElement("img");
  image.src = words[word][0];
  image.alt = word;
  image.addEventListener("click", function(event) {
    var word = event.target.alt;
	var readings = words[word].slice(1);
    var valid = false;
    for (var i = 0; i < readings.length; i++) {
      var reading = readings[i];
      if (!lastChar || reading.charAt(0) === lastChar) {
        if (/[ぁぃぅぇぉゃゅょっー]$/.test(reading)) {
          var nextChar = String.fromCharCode(reading.charCodeAt(reading.length-2));
          currentWord = reading;
          lastChar = nextChar;
        } else {
          currentWord = reading;
          lastChar = currentWord.charAt(currentWord.length-1);
        }
        var resultDiv = document.getElementById("result");
        resultDiv.innerText = "現在の単語: " + currentWord;
        event.target.style.opacity = "0.5";
        event.target.removeEventListener("click", arguments.callee);
        valid = true;
        break;
      }
    }
    if (!valid) {
      alert("その単語は使えません。最後の文字は「" + lastChar + "」で始まる単語を選んでください。");
    }
  });
  imagesDiv.appendChild(image);
}

  </script>
</body>
</html>